<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.31.0">
    <meta name="project" content="Anoma v0.19.0">


    <title>Anoma.Node.Logger â€” Anoma v0.19.0</title>
    <link rel="stylesheet" href="dist/html-elixir-3ZLIM5JF.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-43PMFBC7.js"></script>
    <script src="dist/sidebar_items-142A9862.js"></script>

      <script src="./.doc-versions.js"></script>

    <script async src="dist/html-CILPWI2Q.js"></script>


  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
Anoma
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.19.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
GUIDES
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


        <li>
          <button id="tasks-list-tab-button" role="tab" data-type="tasks" aria-controls="tasks-tab-panel" aria-selected="false" tabindex="-1">
            <span translate="no">Mix</span> Tasks
          </button>
        </li>

    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


    <div id="tasks-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="tasks-list-tab-button" hidden>
      <ul id="tasks-full-list" class="full-list"></ul>
    </div>

</nav>

<main class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">
      <div class="top-search">
        <div class="search-settings">
          <form class="search-bar" action="search.html">
            <label class="search-label">
              <span class="sr-only">Search documentation of Anoma</span>
              <input name="q" type="text" class="search-input" placeholder="Search Documentation (press /)" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
            </label>
            <button type="submit" class="search-button" aria-label="Submit Search">
              <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
            </button>
            <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
              <i class="ri-close-line ri-lg" title="Cancel search"></i>
            </button>
          </form>
          <button class="icon-settings display-settings">
            <i class="ri-settings-3-line"></i>
            <span class="sr-only">Settings</span>
          </button>
        </div>
      </div>
      <div class="autocomplete">
      </div>

<h1>

  <span translate="no">Anoma.Node.Logger</span> 
  <small class="app-vsn" translate="no">(Anoma v0.19.0)</small>

</h1>


  <section id="moduledoc">
<p>I am the Logger Engine, an implementation of the Local Logging Engine.</p><p>I have a storage field which accepts the storage used for the logging
tied to a specific node, as well as the address of the clock used for
timestamping.</p><p>I store and get the logging info using the keyspace method.</p><h3 id="module-public-api" class="section-heading">
  <a href="#module-public-api" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Public API</span>
</h3>
<p>I provide the following public functionality:</p><h4>Adding Logs</h4><ul><li><a href="#add/3"><code class="inline">add/3</code></a></li></ul><h4>Getting Logs</h4><ul><li><a href="#get/1"><code class="inline">get/1</code></a></li><li><a href="#get/2"><code class="inline">get/2</code></a></li></ul>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:t/0" translate="no">t()</a>

      </div>

        <div class="summary-synopsis"><p>I am the type of the Logging Engine.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#add/3" translate="no">add(logger, atom, msg)</a>

      </div>

        <div class="summary-synopsis"><p>I am the Logger add function, the implementation of LocalLoggingAppend of
the Local Logging Engine of the Anoma Specification.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#child_spec/1" translate="no">child_spec(init_arg)</a>

      </div>

        <div class="summary-synopsis"><p>Returns a specification to start this module under a supervisor.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get/1" translate="no">get(logger)</a>

      </div>

        <div class="summary-synopsis"><p>I am the Logger get function of one argument.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get/2" translate="no">get(logger, engine)</a>

      </div>

        <div class="summary-synopsis"><p>I am the Logger get function of two arguments.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#handle_cast/3" translate="no">handle_cast(arg, addr, state)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#init/1" translate="no">init(state)</a>

      </div>

        <div class="summary-synopsis"><p>I am the Logger Engine initialization function.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">t()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t() :: %Anoma.Node.Logger{
  clock: <a href="Anoma.Node.Router.Addr.html#t:t/0">Anoma.Node.Router.Addr.t</a>() | nil,
  storage: <a href="Anoma.Node.Router.Addr.html#t:t/0">Anoma.Node.Router.Addr.t</a>() | nil,
  topic: <a href="Anoma.Node.Router.Addr.html#t:t/0">Anoma.Node.Router.Addr.t</a>() | nil
}</pre>

      </div>

<p>I am the type of the Logging Engine.</p><p>I have the minimal fields required to store timestamped messages in the
specified storage.</p><h3 id="t:t/0-fields" class="section-heading">
  <a href="#t:t/0-fields" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fields</span>
</h3>
<ul><li><code class="inline">:storage</code> - The Storage Engine address used for storing.</li><li><code class="inline">:clock</code> - The Clock Engine address used for timestamping.</li><li><code class="inline">:topic</code> - The topic address for broadcasting.</li></ul>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="add/3">

  <div class="detail-header">
    <a href="#add/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">add(logger, atom, msg)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> add(<a href="Anoma.Node.Router.html#t:addr/0">Anoma.Node.Router.addr</a>() | nil, <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) :: :ok | nil</pre>

      </div>

<p>I am the Logger add function, the implementation of LocalLoggingAppend of
the Local Logging Engine of the Anoma Specification.</p><p>I receive three arguments: an address of the logger, an atom specifying
the urgency of the logging message and the logging message itself.</p><p>If the logger address is indeed an address, I put the info inside the
specified storage using <code class="inline">Storage.put/3</code>.</p><p>The information is stored using a keyspace method. The message is hence
attached to a list of 4 elements:</p><ol><li>ID of the logger calling for storage</li><li>ID of the engine whose info we log or a PID of the worker process</li><li>Timestamp relative to the clock engine used</li><li>The urgency atom</li></ol><p>I then use the atom to call the Elixir logger in order to inform the
user of any specific major logging event such as, e.g. failing
workers.</p>
  </section>
</section>
<section class="detail" id="child_spec/1">

  <div class="detail-header">
    <a href="#child_spec/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">child_spec(init_arg)</h1>


  </div>

  <section class="docstring">

<p>Returns a specification to start this module under a supervisor.</p><p>See <a href="https://hexdocs.pm/elixir/Supervisor.html"><code class="inline">Supervisor</code></a>.</p>
  </section>
</section>
<section class="detail" id="get/1">

  <div class="detail-header">
    <a href="#get/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get(logger)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get(<a href="Anoma.Node.Router.html#t:addr/0">Anoma.Node.Router.addr</a>() | nil) ::
  [{[<a href="Anoma.Crypto.Id.Extern.html#t:t/0">Anoma.Crypto.Id.Extern.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()], <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}] | nil</pre>

      </div>

<p>I am the Logger get function of one argument.</p><p>Given a non-nil logger address, I get the entire keyspace related to the
storage attached to the aforementioned logger ID using
<code class="inline">Storage.get_keyspace/2</code></p><p>I return a list of 2-tuples. Its left element will be a list whose
head is the ID of the specified logger, followed by the engine ID (or
worker PID), the timestamp, and an atom specifying urgency of the logging
message. Its right element will be the message.</p>
  </section>
</section>
<section class="detail" id="get/2">

  <div class="detail-header">
    <a href="#get/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get(logger, engine)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get(<a href="Anoma.Node.Router.html#t:addr/0">Anoma.Node.Router.addr</a>() | nil, <a href="Anoma.Node.Router.html#t:addr/0">Anoma.Node.Router.addr</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pid</a>()) ::
  [{[<a href="Anoma.Crypto.Id.Extern.html#t:t/0">Anoma.Crypto.Id.Extern.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pid</a>()], <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}]
  | nil</pre>

      </div>

<p>I am the Logger get function of two arguments.</p><p>Given a non-nil logger address and an engine address, I get the keyspace
which conatins all the info stored by the logger about the supplied
engine using <code class="inline">Storage.get_keyspace/2</code></p><p>I return a list of 2-tuples. Its left element will be a list whose
head is the ID of the specified logger, followed by the engine ID (or
worker PID), the timestamp, and an atom specifying urgency of the logging
message. Its right element will be the message.</p>
  </section>
</section>
<section class="detail" id="handle_cast/3">

  <div class="detail-header">
    <a href="#handle_cast/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">handle_cast(arg, addr, state)</h1>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="init/1">

  <div class="detail-header">
    <a href="#init/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">init(state)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> init(<a href="#t:t/0">t</a>()) :: {:ok, <a href="#t:t/0">t</a>()}</pre>

          <pre translate="no"><span class="attribute">@spec</span> init(
  storage: <a href="Anoma.Node.Storage.html#t:t/0">Anoma.Node.Storage.t</a>(),
  clock: <a href="Anoma.Node.Router.html#t:addr/0">Anoma.Node.Router.addr</a>(),
  topic: <a href="Anoma.Node.Router.html#t:addr/0">Anoma.Node.Router.addr</a>()
) :: {:ok, <a href="#t:t/0">t</a>()}</pre>

      </div>

<p>I am the Logger Engine initialization function.</p><h3 id="init/1-pattern-matching-variations" class="section-heading">
  <a href="#init/1-pattern-matching-variations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Pattern-Matching Variations</span>
</h3>
<ul><li><code class="inline">init(Logger.t())</code> - I initialize the Engine with the given state.</li><li><code class="inline">init(args)</code> - I expect a keylist with <code class="inline">:storage</code>, <code class="inline">:clock</code>, and<pre><code class="makeup elixir" translate="no"><span class="w">           </span><span class="err">`</span><span class="ss">:topic</span><span class="err">`</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">launch</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nc">Engine</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">appropriate</span><span class="w">
           </span><span class="n">state</span><span class="o">.</span></code></pre></li></ul>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">
        <p>

            <span class="line">
              <a href="https://hex.pm/packages/anoma/0.19.0" class="footer-hex-package">Hex Package</a>

              <a href="https://preview.hex.pm/preview/anoma/0.19.0">Hex Preview</a>

                (<a href="https://preview.hex.pm/preview/anoma/0.19.0/show/lib/anoma/node/logger.ex">current file</a>)

            </span>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

              <a href="Anoma.epub" title="ePub version">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.31.0) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</main>
</div>

<script src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
mermaid.initialize({
  startOnLoad: false,
  theme: document.body.className.includes("dark") ? "dark" : "default"
});
let id = 0;
for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
  const preEl = codeEl.parentElement;
  const graphDefinition = codeEl.textContent;
  const graphEl = document.createElement("div");
  const graphId = "mermaid-graph-" + id++;
  mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
    graphEl.innerHTML = svg;
    bindFunctions?.(graphEl);
    preEl.insertAdjacentElement("afterend", graphEl);
    preEl.remove();
  });
}
});
</script>
<script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.18.2"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
for (const codeEl of document.querySelectorAll("pre code.vega-lite")) {
  try {
    const preEl = codeEl.parentElement;
    const spec = JSON.parse(codeEl.textContent);
    const plotEl = document.createElement("div");
    preEl.insertAdjacentElement("afterend", plotEl);
    vegaEmbed(plotEl, spec);
    preEl.remove();
  } catch (error) {
    console.log("Failed to render Vega-Lite plot: " + error)
  }
}
});
</script>

  </body>
</html>
